{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Shopping List Application Schema",
  "description": "Shopping list and item schema definitions",
  "version": "1.0.0",
  "definitions": {
    "ObjectId": {
      "type": "string",
      "pattern": "^[0-9a-fA-F]{24}$",
      "description": "MongoDB ObjectId as 24-character hex string"
    },
    "ShoppingListItem": {
      "type": "object",
      "title": "Shopping List Item",
      "description": "Individual item in a shopping list",
      "required": ["_id", "name", "quantity", "created_by_user_id", "created_at", "updated_at"],
      "properties": {
        "_id": {
          "$ref": "#/definitions/ObjectId",
          "description": "Unique item identifier"
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 255,
          "description": "Item name or description"
        },
        "quantity": {
          "type": "number",
          "minimum": 0,
          "maximum": 9999,
          "description": "Quantity needed"
        },
        "purchased_at": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "When item was purchased (null if not purchased)"
        },
        "created_by_user_id": {
          "$ref": "#/definitions/ObjectId",
          "description": "Reference to user who added this item"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "When item was added to list"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time",
          "description": "When item was last modified"
        }
      },
      "additionalProperties": false
    },
    "ShoppingList": {
      "type": "object",
      "title": "Shopping List",
      "description": "Collaborative shopping list",
      "required": ["title", "owner_id", "member_ids", "items", "created_at", "updated_at"],
      "properties": {
        "_id": {
          "$ref": "#/definitions/ObjectId",
          "description": "Unique list identifier"
        },
        "title": {
          "type": "string",
          "minLength": 1,
          "maxLength": 255,
          "description": "Shopping list title"
        },
        "owner_id": {
          "$ref": "#/definitions/ObjectId",
          "description": "Reference to user who owns this list"
        },
        "member_ids": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ObjectId"
          },
          "uniqueItems": true,
          "maxItems": 100,
          "description": "Array of user IDs who have access to this list"
        },
        "items": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ShoppingListItem"
          },
          "maxItems": 1000,
          "description": "Array of shopping list items",
          "default": []
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "List creation timestamp"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time",
          "description": "Last list modification timestamp"
        },
        "archived_at": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "When list was archived (null if active)"
        }
      },
      "additionalProperties": false
    }
  }
}