{
  "users": {
    "$jsonSchema": {
      "bsonType": "object",
      "title": "User Schema",
      "required": ["name", "email", "is_active", "created_at", "updated_at"],
      "properties": {
        "_id": {
          "bsonType": "objectId"
        },
        "name": {
          "bsonType": "string",
          "minLength": 1,
          "maxLength": 100,
          "description": "User's full name"
        },
        "email": {
          "bsonType": "string",
          "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",
          "maxLength": 255,
          "description": "Valid email address"
        },
        "password": {
          "bsonType": "string",
          "minLength": 8,
          "maxLength": 255,
          "description": "Hashed password"
        },
        "is_active": {
          "bsonType": "bool",
          "description": "Account status"
        },
        "created_at": {
          "bsonType": "date",
          "description": "Account creation timestamp"
        },
        "updated_at": {
          "bsonType": "date",
          "description": "Last update timestamp"
        }
      },
      "additionalProperties": false
    }
  },
  "shopping_lists": {
    "$jsonSchema": {
      "bsonType": "object",
      "title": "Shopping List Schema", 
      "required": ["title", "owner_id", "member_ids", "items", "created_at", "updated_at"],
      "properties": {
        "_id": {
          "bsonType": "objectId"
        },
        "title": {
          "bsonType": "string",
          "minLength": 1,
          "maxLength": 200,
          "description": "Shopping list title"
        },
        "owner_id": {
          "bsonType": "objectId",
          "description": "List owner reference"
        },
        "member_ids": {
          "bsonType": "array",
          "items": {
            "bsonType": "objectId"
          },
          "uniqueItems": true,
          "maxItems": 100,
          "minItems": 1,
          "description": "List members"
        },
        "items": {
          "bsonType": "array",
          "maxItems": 1000,
          "items": {
            "bsonType": "object",
            "required": ["_id", "name", "quantity", "created_by_user_id", "created_at", "updated_at"],
            "properties": {
              "_id": {
                "bsonType": "objectId"
              },
              "name": {
                "bsonType": "string",
                "minLength": 1,
                "maxLength": 100
              },
              "quantity": {
                "bsonType": "number",
                "minimum": 0,
                "maximum": 9999
              },
              "purchased_at": {
                "bsonType": ["date", "null"]
              },
              "created_by_user_id": {
                "bsonType": "objectId"
              },
              "created_at": {
                "bsonType": "date"
              },
              "updated_at": {
                "bsonType": "date"
              }
            },
            "additionalProperties": false
          },
          "description": "Shopping list items"
        },
        "created_at": {
          "bsonType": "date"
        },
        "updated_at": {
          "bsonType": "date"
        },
        "archived_at": {
          "bsonType": ["date", "null"]
        }
      },
      "additionalProperties": false
    }
  }
}